{"ast":null,"code":"const openshiftRestClient = window.require('openshift-rest-client').OpenshiftClient;\n\nconst projectName = '2262804sproject';\nconst settings = {};\nsettings.config = {\n  url: 'https://idagpu-head.dcs.gla.ac.uk:8443',\n  // url: 'https://console.ida.dcs.gla.ac.uk',\n  auth: {\n    username: '2262804s',\n    password: 'bench12356'\n  },\n  insecureSkipTlsVerify: true\n};\n\nasync function aa() {\n  const client = await openshiftRestClient(settings);\n  console.log(projectName);\n  const projects = await client.apis.build.v1.ns(projectName).builds.get();\n  console.log(projects); // const namespaces = await client.apis.build.v1.ns('2262804sproject').pods;\n  // const job = await client.apis.batch.v1.ns(projectName).jobs('job-appsimulator-flinksim').delete();\n  // console.log(\"Job:\", job);\n  // // /apis/batch/v1/namespaces/$NAMESPACE/jobs/$NAME\n  // POST /apis/batch/v1/namespaces/$NAMESPACE/jobs HTTP/1.1\n\n  const jobs = await client.apis.batch.v1.ns(projectName).jobs.get();\n  console.log('Jobs: ', jobs); // console.log(Object.keys(deployment['body']['items']));\n\n  console.log(jobs['body']['items']); // /apis/batch/v1/jobs\n  // const namespaces = await client.apis.build.v1.ns('2262804sproject').get_pods\n  // console.log('Namespaces: ', deployment)\n}\n\nasync function removeJob() {\n  const client = await openshiftRestClient(settings);\n  console.log(projectName); // const projects = await client.apis.build.v1.ns(projectName).builds.get();\n  // console.log(projects);\n  // const namespaces = await client.apis.build.v1.ns('2262804sproject').pods;\n\n  const job = await client.apis.batch.v1.ns(projectName).jobs('job-appsimulator-flinksim').delete();\n  console.log(\"Job:\", job);\n}\n\nexport async function createNewJob() {\n  const client = await openshiftRestClient(settings);\n  console.log(projectName);\n  const newJob = await client.apis.batch.v1.ns(projectName).jobs.post({\n    \"body\": {\n      \"apiVersion\": \"batch/v1\",\n      \"kind\": \"Job\",\n      \"metadata\": {\n        \"name\": \"job-appsimulator-flinksim\",\n        \"namespace\": \"2262804sproject\"\n      },\n      \"spec\": {\n        \"parallelism\": 1,\n        \"completions\": 1,\n        \"template\": {\n          \"metadata\": {\n            \"labels\": {\n              \"deploymentconfig\": \"job-appsimulator-flinksim\",\n              \"app\": \"appsimulator\",\n              \"group\": \"2262804s\"\n            }\n          },\n          \"spec\": {\n            \"containers\": [{\n              \"name\": \"flinksim\",\n              \"image\": \"docker-registry.default.svc:5000/2262804sproject/is-appsimulator-start:v1\",\n              \"resources\": {},\n              \"volumeMounts\": [{\n                \"name\": \"config-files\",\n                \"mountPath\": \"/opt/flink/config\"\n              }],\n              \"env\": [{\n                \"name\": \"JOB_MANAGER_RPC_ADDRESS\",\n                \"value\": \"srv-jobmanager\"\n              }],\n              \"imagePullPolicy\": \"Always\"\n            }],\n            \"volumes\": [{\n              \"name\": \"config-files\",\n              \"configMap\": {\n                \"name\": \"cm-appsimulator\"\n              }\n            }],\n            \"restartPolicy\": \"Never\"\n          }\n        }\n      },\n      \"status\": {}\n    }\n  });\n  console.log(\"New Job:\", newJob);\n}\nremoveJob(); // createNewJob();","map":{"version":3,"sources":["/home/dominykas/year4/Individual-Project/website/client/src/rest.js"],"names":["openshiftRestClient","window","require","OpenshiftClient","projectName","settings","config","url","auth","username","password","insecureSkipTlsVerify","aa","client","console","log","projects","apis","build","v1","ns","builds","get","jobs","batch","removeJob","job","delete","createNewJob","newJob","post"],"mappings":"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","sourcesContent":["const openshiftRestClient = window.require('openshift-rest-client').OpenshiftClient;\nconst projectName = '2262804sproject';\nconst settings = {};\n\nsettings.config = {\n    url: 'https://idagpu-head.dcs.gla.ac.uk:8443',\n    // url: 'https://console.ida.dcs.gla.ac.uk',\n    auth: {\n        username: '2262804s',\n        password: 'bench12356'\n    },\n    insecureSkipTlsVerify: true\n};\n\nasync function aa(){\n    const client = await openshiftRestClient(settings);\n    console.log(projectName);\n    const projects = await client.apis.build.v1.ns(projectName).builds.get();\n    console.log(projects);\n    // const namespaces = await client.apis.build.v1.ns('2262804sproject').pods;\n\n    // const job = await client.apis.batch.v1.ns(projectName).jobs('job-appsimulator-flinksim').delete();\n    // console.log(\"Job:\", job);\n    // // /apis/batch/v1/namespaces/$NAMESPACE/jobs/$NAME\n\n\n    // POST /apis/batch/v1/namespaces/$NAMESPACE/jobs HTTP/1.1\n\n\n    const jobs = await client.apis.batch.v1.ns(projectName).jobs.get();\n    console.log('Jobs: ', jobs);\n    // console.log(Object.keys(deployment['body']['items']));\n    console.log(jobs['body']['items']);\n    // /apis/batch/v1/jobs\n    // const namespaces = await client.apis.build.v1.ns('2262804sproject').get_pods\n    // console.log('Namespaces: ', deployment)\n}\n\nasync function removeJob(){\n    const client = await openshiftRestClient(settings);\n    console.log(projectName);\n    // const projects = await client.apis.build.v1.ns(projectName).builds.get();\n    // console.log(projects);\n    // const namespaces = await client.apis.build.v1.ns('2262804sproject').pods;\n\n    const job = await client.apis.batch.v1.ns(projectName).jobs('job-appsimulator-flinksim').delete();\n    console.log(\"Job:\", job);\n}\n\nexport async function createNewJob() {\n    const client = await openshiftRestClient(settings);\n    console.log(projectName);\n\n    const newJob = await client.apis.batch.v1.ns(projectName).jobs.post({\n            \"body\": {\n                \"apiVersion\": \"batch/v1\",\n                \"kind\": \"Job\",\n                \"metadata\": {\n                    \"name\": \"job-appsimulator-flinksim\",\n                    \"namespace\": \"2262804sproject\"\n                },\n                \"spec\": {\n                    \"parallelism\": 1,\n                    \"completions\": 1,\n                    \"template\": {\n                        \"metadata\": {\n                            \"labels\": {\n                                \"deploymentconfig\": \"job-appsimulator-flinksim\",\n                                \"app\": \"appsimulator\",\n                                \"group\": \"2262804s\"\n                            }\n                        },\n                        \"spec\": {\n                            \"containers\": [\n                                {\n                                    \"name\": \"flinksim\",\n                                    \"image\": \"docker-registry.default.svc:5000/2262804sproject/is-appsimulator-start:v1\",\n                                    \"resources\": {},\n                                    \"volumeMounts\": [\n                                        {\n                                            \"name\": \"config-files\",\n                                            \"mountPath\": \"/opt/flink/config\"\n                                        }\n                                    ],\n                                    \"env\": [\n                                        {\n                                            \"name\": \"JOB_MANAGER_RPC_ADDRESS\",\n                                            \"value\": \"srv-jobmanager\"\n                                        }\n                                    ],\n                                    \"imagePullPolicy\": \"Always\"\n                                }\n                            ],\n                            \"volumes\": [\n                                {\n                                    \"name\": \"config-files\",\n                                    \"configMap\": {\n                                        \"name\": \"cm-appsimulator\"\n                                    }\n                                }\n                            ],\n                            \"restartPolicy\": \"Never\"\n                        }\n                    }\n                },\n                \"status\": {}\n            }\n        }\n    );\n    console.log(\"New Job:\", newJob);\n\n}\n\nremoveJob();\n// createNewJob();\n"]},"metadata":{},"sourceType":"module"}